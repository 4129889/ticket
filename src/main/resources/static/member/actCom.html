<!DOCTYPE html>
<html lang="en">

<head>
	<title>NewViewForum - doPost</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="images/icons/favicon.png" />
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link href="./assets/dist/css/bootstrap.min.css" rel="stylesheet">
	<!--===============================================================================================-->
	<style>
		.star {
			color: gold;
			cursor: pointer;
			font-size: 24px;
		}
	</style>

	<style>
		.table-shopping-cart .column-5 {
			width: 172px;
			padding-right: px;
			/* 0 */
			text-align: right;
			font-size: 16px;
		}

		.table-shopping-cart .table_row td {
			padding-bottom: 0px;
		}

		.table-shopping-cart .table_row td.column-1 {
			padding-bottom: 0px;
		}

		.p-t-75,
		.p-tb-75,
		.p-all-75 {
			padding-top: 75px;
		}

		.p-b-13,
		.p-tb-13,
		.p-all-13 {
			padding-bottom: 13px;
		}
	</style>
	<style>
		.h2 {
			color: black;
		}

		.centered-content {
			text-align: center;
			/* 水平居中对齐 */
		}

		input[disabled] {
			background-color: #eee;
			cursor: not-allowed;
		}


		.drop_zone,
		.preview {
			width: 48%;
			/* 設定拖放區和預覽區的寬度為容器的一半 */
			border: 2px dashed #ccc;
			height: 300px;
			text-align: center;
			cursor: pointer;
			display: inline-block;
			margin: 5px;
		}

		.preview_img {
			width: 100%;
			/* 讓圖片填滿整個預覽格子 */
			height: 100%;
			object-fit: contain;
			/* 調整圖片的呈現方式，保持原始比例 */
		}

		@media (max-width: 768px) {

			.drop_zone,
			.preview {
				display: block;
				width: auto;
				margin-right: 0;
			}
		}
	</style>

</head>

<body class="animsition">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<script src="./vendors/jquery/jquery-3.7.1.min.js"></script>
    <!-- Header -->
    <header class="header-v3">
      <!-- Header desktop -->
      <div class="container-menu-desktop trans-03 mb-6">
        <div class="wrap-menu-desktop" style="background-color: black">
          <nav class="limiter-menu-desktop p-l-45">
            <!-- Logo desktop -->
            <a href="./home-03.html" class="logo" style="color: white; font-size: large; font-weight: bold">
              <!-- <img src="images/icons/logo-02.png" alt="IMG-LOGO"> -->
              NewView
            </a>

            <!-- Menu desktop -->
            <div class="menu-desktop">
              <ul class="main-menu" style="font-weight: bold">
                <li>
                  <a href="./home-03.html">主頁</a>
                </li>

                <li>
                  <a href="./NewActJSPTest.jsp">活動專區</a>
                </li>

                <li class="label1" data-label1="hot">
                  <a href="./checkout_cart.html">購物車</a>
                </li>

                <li>
                  <a href="./forum_home.html">討論區</a>
                </li>

                <li>
                  <a href="./member.html">會員中心</a>
                </li>
              </ul>
            </div>

            <!-- Icon header -->
            <div class="wrap-icon-header flex-w flex-r-m h-full">
              <div class="flex-c-m h-full p-r-25 bor6">
                <div class="icon-header-item cl0 hov-cl1 trans-04 p-lr-11 js-show-login">
                  <i class="fa fa-user me-sm-1"></i>
                </div>
                <a href="#" class="logout" style="color: white; margin-right: 15px; margin-left: 15px">登出</a>
                <!-- <div class="icon-header-item cl0 hov-cl1 trans-04 p-lr-11 icon-header-noti js-show-cart" data-notify="2">
                  <i class="zmdi zmdi-shopping-cart"></i>
                </div> -->
              </div>

              <div class="flex-c-m h-full p-lr-19">
                <div class="icon-header-item cl0 hov-cl1 trans-04 p-lr-11 js-show-sidebar">
                  <i class="zmdi zmdi-menu"></i>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>

      <!-- Header Mobile -->
      <div class="wrap-header-mobile">
        <!-- Logo moblie -->
        <div class="logo-mobile">
          <a href="home-03.html" style="color: black; font-size: large; font-weight: bold">
            <!-- <img src="images/icons/logo-01.png" alt="IMG-LOGO"/> -->
            NewView
          </a>
        </div>

        <!-- Icon header -->
        <div class="wrap-icon-header flex-w flex-r-m h-full m-r-15">
          <div class="flex-c-m h-full p-r-5">
            <div class="icon-header-item cl2 hov-cl1 trans-04 p-lr-11 js-show-login">
              <i class="fa fa-user me-sm-1"></i>
            </div>
            <a href="#" class="logout" style="margin-right: 15px; margin-left: 15px">登出</a>
            <!-- <div class="icon-header-item cl2 hov-cl1 trans-04 p-lr-11 icon-header-noti js-show-cart" data-notify="2">
              <i class="zmdi zmdi-shopping-cart"></i>
            </div> -->
          </div>
        </div>

        <!-- Button show menu -->
        <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
          <span class="hamburger-box">
            <span class="hamburger-inner"></span>
          </span>
        </div>
      </div>

      <!-- Menu Mobile -->
      <div class="menu-mobile">
        <ul class="main-menu-m" style="font-weight: bold">
          <li>
            <a href="./home-03.html">主頁</a>
            <span class="arrow-main-menu-m">
              <i class="fa fa-angle-right" aria-hidden="true"></i>
            </span>
          </li>

          <li>
            <a href="./NewActJSPTest.jsp">活動專區</a>
          </li>

          <li>
            <a href="./checkout_cart.html" class="label1 rs1" data-label1="hot">購物車</a>
          </li>

          <li>
            <a href="./forum_dopost.html">討論區</a>
          </li>

          <li>
            <a href="./member.html">會員中心</a>
          </li>

          <li>
            <a href="./myOrder.html">訂單查詢</a>
          </li>
        </ul>
      </div>

      <!-- Modal Search -->
      <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
        <button class="flex-c-m btn-hide-modal-search trans-04">
          <i class="zmdi zmdi-close"></i>
        </button>

        <form class="container-search-header">
          <div class="wrap-search-header">
            <input class="plh0" type="text" name="search" placeholder="Search..." />

            <button class="flex-c-m trans-04">
              <i class="zmdi zmdi-search"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- 登出 -->
      <script>
        $(".logout").on("click", function (e) {
          // 登出 API
          const COLLECTION_POINT = "/LogOut";
          e.preventDefault();
          $.ajax({
            url: END_POINT_URL + COLLECTION_POINT,
            type: "POST",
            dataType: "json",
            beforeSend: function (xhr) {
              console.log("beforeSend");
            },
            success: function (data) {
              console.log(data);
              redirect(data);
            },
            complete: function (xhr) {
              console.log("complete");
            },
          });
          function redirect(data) {
            console.log(data);
            alert("帳號已登出，畫面將轉導至首頁");
            location.href = "home-03.html";
          }
        });
      </script>
    </header>

    <!-- Sidebar -->
    <aside class="wrap-sidebar js-sidebar">
      <div class="s-full js-hide-sidebar"></div>

      <div class="sidebar flex-col-l p-t-22 p-b-25">
        <div class="flex-r w-full p-b-30 p-r-27">
          <div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-sidebar">
            <i class="zmdi zmdi-close"></i>
          </div>
        </div>

        <div class="sidebar-content flex-w w-full p-lr-65 js-pscroll">
          <ul class="sidebar-link w-full">
            <li class="p-b-13">
              <a href="./home-03.html" class="stext-102 cl2 hov-cl1 trans-04"> 主頁 </a>
            </li>

            <li class="p-b-13">
              <a href="./NewActJSPTest.jsp" class="stext-102 cl2 hov-cl1 trans-04"> 活動專區 </a>
            </li>

            <li class="p-b-13">
              <a href="./forum_home.html" class="stext-102 cl2 hov-cl1 trans-04"> 討論區 </a>
            </li>

            <li class="p-b-13">
              <a href="./member.html" class="stext-102 cl2 hov-cl1 trans-04"> 會員中心 </a>
            </li>

            <li class="p-b-13">
              <a href="./myOrder.html" class="stext-102 cl2 hov-cl1 trans-04"> 訂單查詢 </a>
            </li>
          </ul>

          <div class="sidebar-gallery w-full p-tb-30">
            <span class="mtext-101 cl5"> @ NewView </span>

            <div class="flex-w flex-sb p-t-36 gallery-lb"></div>
          </div>

          <div class="sidebar-gallery w-full">
            <span class="mtext-101 cl5"> About Us </span>

            <p class="stext-108 cl6 p-t-27">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur maximus vulputate hendrerit. Praesent faucibus erat vitae rutrum gravida. Vestibulum tempus mi enim, in molestie sem
              fermentum quis.
            </p>
          </div>
        </div>
      </div>
    </aside>

	<!-- Cart -->
	<div class="wrap-header-cart js-panel-cart">
		<div class="s-full js-hide-cart"></div>

		<div class="header-cart flex-col-l p-l-65 p-r-25">
			<div class="header-cart-title flex-w flex-sb-m p-b-8">
				<span class="mtext-103 cl2"> Your Cart </span>

				<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
					<i class="zmdi zmdi-close"></i>
				</div>
			</div>

			<div class="header-cart-content flex-w js-pscroll">
				<ul class="header-cart-wrapitem w-full">
					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="images/item-cart-01.jpg" alt="IMG" />
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04"> White Shirt Pleat </a>

							<span class="header-cart-item-info"> 1 x $19.00 </span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="images/item-cart-02.jpg" alt="IMG" />
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04"> Converse All Star </a>

							<span class="header-cart-item-info"> 1 x $39.00 </span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="images/item-cart-03.jpg" alt="IMG" />
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04"> Nixon Porter Leather </a>

							<span class="header-cart-item-info"> 1 x $17.00 </span>
						</div>
					</li>
				</ul>

				<div class="w-full">
					<div class="header-cart-total w-full p-tb-40">Total: $75.00</div>

					<div class="header-cart-buttons flex-w w-full">
						<a href="shoping-cart.html"
							class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
							View Cart </a>

						<a href="shoping-cart.html"
							class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10"> Check Out
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- ===================================================== -->


	<!-- Title page -->
	<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url('./img/banner.jpg');">
		<h4 class="ltext-105 cl0 txt-center "></h4>
	</section>


	<!-- Content page -->
	<section class="bg0 p-t-104 p-b-116">
		<div class="container">
			<!-- <div class="flex-w flex-tr"> -->
			<div class=" bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md">
				<form id="articleForm">
					<h4 class="mtext-105 cl2 txt-center p-b-30">
						評論活動
					</h4>


					<div class="form-group">
						<label for="TextInput">會員帳號</label>
						<input type="text" id="userID" class="form-control" placeholder="@userID" readonly="readonly">
					</div>


					<div class="form-group">
						<label for="TextInput">活動</label>
						<input type="text" id="actName" class="form-control" placeholder="@actName" readonly="readonly">
					</div>

					<div class="form-group">
						<label for="TextInput">明細編號</label>
						<input type="text" id="orderListID" class="form-control" placeholder="@orderListID"
							readonly="readonly">
					</div>

					<p id="ratingResult" style="margin-bottom:-5px;">我的評分：5星</p>
					<p class="rating">
						<span class="star" onclick="rate(1)">&#9733;</span>
						<span class="star" onclick="rate(2)">&#9733;</span>
						<span class="star" onclick="rate(3)">&#9733;</span>
						<span class="star" onclick="rate(4)">&#9733;</span>
						<span class="star" onclick="rate(5)">&#9733;</span>
					</p>

					<div class="form-group ">
						<label for="TextInput">評論內容</label>
						<textarea  id="reviewContent" class="form-control stext-111 cl2 plh3 size-120 p-lr-10 p-tb-25"
							name="msg" placeholder="text your content" required>
						</textarea>
						<div class="invalid-feedback">請輸入內容</div>
					</div>

					<!-- <div class="custom-file">
						<input type="file" class="custom-file-input" id="validatedCustomFile">
						<label class="custom-file-label" for="validatedCustomFile">選擇圖片</label>
					</div>
					<p>已選擇的文件: <span id="selectedFileName"></span></p> -->


					<div>
						<label for="p_file"><br>拖曳文章圖片至下方</label><br>
						<input type="file" id="p_file" style="display: none;">
						<div class="centered-content">
							<!-- 第一個拖放區域和預覽區域 -->
							<div class="drop_zone" id="drop_zone1"><span class="text">將圖片1拖曳至此處</span></div>
							<div class="preview" id="preview1"><span class="text">預覽圖</span></div>

							<!-- 第二個拖放區域和預覽區域 -->
							<div class="drop_zone" id="drop_zone2"><span class="text">將圖片2拖曳至此處</span></div>
							<div class="preview" id="preview2"><span class="text">預覽圖</span></div>

							<!-- 第三個拖放區域和預覽區域 -->
							<div class="drop_zone" id="drop_zone3"><span class="text">將圖片3拖曳至此處</span></div>
							<div class="preview" id="preview3"><span class="text">預覽圖</span></div>
						</div>
					</div>

					<br>
					<br>
					<br>
					<br>
					<button class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer">
						Submit
					</button>
				</form>
			</div>

		</div>
		</div>
	</section>
	

    <!-- Footer -->
    <footer class="bg3 p-t-55 p-b-32">
      <div class="container">
        <div class="row">
          <div class="col-sm-6 col-lg-3 p-b-20">
            <h4 class="stext-301 cl0 p-b-30">Categories</h4>
            <ul style="border-right: 1px solid #ccc; padding-right: 20px">
              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 脫口秀 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 講座 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 音樂會 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 舞台劇 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 演唱會 </a>
              </li>
            </ul>
          </div>

          <div class="col-sm-6 col-lg-3 p-b-20">
            <h4 class="stext-301 cl0 p-b-30">Help</h4>

            <ul>
              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 訂單查詢 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> 退貨申請 </a>
              </li>

              <li class="p-b-10">
                <a href="#" class="stext-107 cl7 hov-cl1 trans-04"> FAQs </a>
              </li>
            </ul>
          </div>

          <div class="col-sm-6 col-lg-3 p-b-20">
            <h4 class="stext-301 cl0 p-b-30">Newsletter</h4>

            <form>
              <div class="wrap-input1 w-full p-b-4">
                <input class="input1 bg-none plh1 stext-107 cl7" type="text" name="email" placeholder="email@example.com" />
                <div class="focus-input1 trans-04"></div>
              </div>

              <div class="p-t-18">
                <button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">訂閱電子報</button>
              </div>
            </form>
          </div>

          <div class="col-sm-6 col-lg-3 p-b-20">
            <!-- <h4 class="stext-301 cl0 p-b-30">Latest Blog Post</h4> -->
            <p class="stext-301 cl7 size-201">Ready to get started?</p>
            <p class="stext-107 cl7 size-201">Any questions? Let us know in store at 104台北市中山區南京東路三段219號5樓 or call us on (+886) 2712 0589</p>

            <div class="p-t-27">
              <!-- <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
            <i class="fa fa-facebook"></i>
          </a>

          <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
            <i class="fa fa-instagram"></i>
          </a>

          <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
            <i class="fa fa-pinterest-p"></i>
          </a> -->
            </div>
          </div>
        </div>
      </div>
    </footer>

	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top">
			<i class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

	<!--===============================================================================================-->
	<script>
		// 提交事件
		document.getElementById('articleForm').addEventListener('submit', function (e) {
			e.preventDefault();

			const imgs = document.querySelectorAll('.preview_img');
			const comPicObjectList = [];
			for (let img of imgs) {
				comPicObjectList.push(getComPicObjectFromElement(id, img));
			}

			fetch('orders', {
				method: 'PUT',
				body: JSON.stringify({
					orderListID: id,
					reviewContent: reviewContent.value,
					fiveStarReview: userRating,
					comPics: comPicObjectList
				})
			})
				.then(resp => resp.json())
				.then(body => {
					alert('完成評論！');
					history.back();
				});
		});

		function getComPicObjectFromElement(orderListID, element) {
			const { src } = element;
			const comPicID = element.dataset.compicid;
			const comPicBase64 = src.startsWith('blob:') ? null : src.substring(src.indexOf(',') + 1);
			return { comPicID, orderListID, comPicBase64 };
		}
	</script>

	<!--===============================================================================================-->
	<script>
		window.addEventListener("load", function (e) {
			for (let i = 1; i <= 3; i++) {
				let drop_zone_el = document.getElementById("drop_zone" + i);
				let preview_el = document.getElementById("preview" + i);

				// =========================== 拖放事件 ========================= //
				drop_zone_el.addEventListener("dragover", function (e) {
					e.preventDefault();
					e.target.classList.add("-on");
				});

				drop_zone_el.addEventListener("dragleave", function (e) {
					e.target.classList.remove("-on");
				});

				drop_zone_el.addEventListener("drop", function (e) {
					e.preventDefault();
					e.target.classList.remove("-on");

					if (e.dataTransfer.files.length > 0) {
						preview_img(e.dataTransfer.files[0], preview_el);
					}
				});
			}

			// =========================== 透過File取得預覽圖 ========================= //
			var preview_img = function (file, previewEl) {
				var reader = new FileReader(); // 用來讀取檔案
				reader.readAsDataURL(file); // 讀取檔案
				reader.addEventListener("load", function () {
					const img = previewEl.querySelector('img');
					if (img) {
						img.src = reader.result;
					} else {
						let img_str = '<img src="' + reader.result + '" class="preview_img">';
						previewEl.innerHTML = img_str;
					}
				});
			};

			// p_file_el.addEventListener("change", function (e) {
			// 	if (this.files.length > 0) {
			// 		preview_img(this.files[0]);
			// 	} else {
			// 		preview_el.innerHTML = '<span class="text">預覽圖</span>';
			// 	}
			// });
		});
	</script>

	<!--===============================================================================================-->
	<!-- <script> //上傳檔案顯示
		const fileInput = document.getElementById('validatedCustomFile');
		const selectedFileName = document.getElementById('selectedFileName');

		fileInput.addEventListener('change', function () {
			const fileName = this.value.split('\\').pop(); // 获取文件名
			selectedFileName.textContent = fileName; // 显示文件名
		});
	</script> -->
	<!--===============================================================================================-->
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
	<script>
		$(".js-select2").each(function () {
			$(this).select2({
				minimumResultsForSearch: 20,
				dropdownParent: $(this).next('.dropDownSelect2')
			});
		})
	</script>
	<!--===============================================================================================-->
	<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
	<!--===============================================================================================-->
	<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script>
		$('.js-pscroll').each(function () {
			$(this).css('position', 'relative');
			$(this).css('overflow', 'hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed: 1,
				scrollingThreshold: 1000,
				wheelPropagation: false,
			});

			$(window).on('resize', function () {
				ps.update();
			})
		});
	</script>
	<!--===============================================================================================-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAKFWBqlKAGCeS1rMVoaNlwyayu0e0YRes"></script>
	<script src="js/map-custom.js"></script>
	<!--===============================================================================================-->
	<script src="js/main.js"></script>
	<script>
		let userRating = 5;

		function rate(stars) {
			userRating = stars;
			updateRating();
			highlightStars(stars);
		}

		function updateRating() {if(userRating == null){userRating = 0;}
			const ratingResult = document.getElementById("ratingResult");
			ratingResult.textContent = "我的評分：" + userRating + "星";
		}

		function highlightStars(stars) {
			const allStars = document.querySelectorAll(".star");
			for (let i = 0; i < allStars.length; i++) {
				if (i < stars) {
					allStars[i].style.color = "gold"; // 显示为黄色
				} else {
					allStars[i].style.color = "gray"; // 显示为灰色
				}
			}
		}

	</script>

</body>
<script>
	const urlParams = new URLSearchParams(location.search);
	const id = urlParams.get('orderListID');

	const userID = document.querySelector('#userID');
	const actName = document.querySelector('#actName');
	const orderListID = document.querySelector('#orderListID');
	const reviewContent = document.querySelector('#reviewContent');
	const previews = [
		document.querySelector('#preview1'),
		document.querySelector('#preview2'),
		document.querySelector('#preview3')
	];

	fetch(`orders?orderListID=${id}`, { method: 'OPTIONS' })
		.then(resp => resp.json())
		.then(list => {
			const order = list[0]?.aliasToValue;
			userID.value = order.userID;
			actName.value = order.actName;
			orderListID.value = order.orderListID;
			rate(order.fiveStarReview);
			if(order.reviewContent != undefined){
			reviewContent.value = order.reviewContent;}
			else{reviewContent.value = "";}

			const comPicObjectList = list?.map(o => {
				return {
					comPicID: o.aliasToValue.comPicID,
					comPic: o.aliasToValue.comPic
				};
			});
			for (let index = 0; index < comPicObjectList.length; index++) {
				const comPicObject = comPicObjectList[index];
				const { comPicID, comPic } = comPicObject;
				previews[index].innerHTML = `
					<img
						src="${bytesToUrl(comPic)}"
						${comPicID ? 'data-compicid="' + comPicID + '"' : ''}
						class="preview_img">`;
			}
		});

	function bytesToUrl(bytes) {
		const int8Array = new Int8Array(bytes);
		const blob = new Blob([int8Array]);
		return URL.createObjectURL(blob);
	}
</script>
<script>
document.getElementById('reviewContent').addEventListener('input', function() {
    var inputValue = this.value.trim(); 
    var errorMessage = ''; 

    if (inputValue.length === 0) {
        errorMessage = '請幫我打點字喔。';
    } else if (inputValue.length < 3) {
        errorMessage = '多一點';
    }

    // 设置自定义验证消息
    this.setCustomValidity(errorMessage);
});
</script>
</html>